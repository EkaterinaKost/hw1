# **Семинар 2**

## Решение
Обновите список пакетов, чтобы включить информацию о пакетах Docker из добавленного репозитория:<br>
__ <br>
sudo apt update <br>
Установите Docker:<br>
__<br>
sudo apt install docker-ce
Добавьте вашего пользователя в группу docker, чтобы избежать использования sudo для запуска Docker команд:<br>
__<br>
sudo usermod -aG docker $USER<br>
Перезагрузите систему или запустите следующую команду, чтобы применить изменения в текущем сеансе:<br>
__<br>
newgrp docker<br>
Теперь вы должны быть готовы использовать Docker через терминал. Вы можете проверить его работу, выполнив команду:<br>
__<br>
docker --version<br>

2 -тестируем.<br>

Запустите контейнер с использованием образа "cowsay". Команда будет выглядеть так:<br>
__<br>
docker run docker/whalesay cowsay Hello, Docker!<br>
В данном примере используется образ "docker/whalesay", который содержит утилиту "cowsay". Он будет выводить на экран сообщение "Hello, Docker!" с помощью рисунка коровы.<br>
__<br>
вот несколько интересных вариаций запуска контейнеров с разными животными с использованием утилиты cowsay:<br>
__<br>
Запустить контейнер с рисунком слона:<br>
__<br>
docker run docker/whalesay cowsay -f elephant "Hello, Docker!"<br>
Запустить контейнер с рисунком пингвина:<br>
__<br>
docker run docker/whalesay cowsay -f tux "Hello, Docker!"<br>
Запустить контейнер с рисунком дракона:<br>
__<br>
docker run docker/whalesay cowsay -f dragon "Hello, Docker!"<br>
Запустить контейнер с рисунком кенгуру:<br>
__<br>
docker run docker/whalesay cowsay -f kangaroo "Hello, Docker!"<br>
Запустить контейнер с рисунком утки:<br>
__<br>
docker run docker/whalesay cowsay -f duck "Hello, Docker!"<br>
Запустить контейнер с рисунком панды:<br>
__<br>
docker run docker/whalesay cowsay -f panda "Hello, Docker!"<br>
Запустить контейнер с рисунком совы:<br>
__<br>
docker run docker/whalesay cowsay -f owl "Hello, Docker!"<br>
Запустить контейнер с рисунком кота:<br>
__<br>
docker run docker/whalesay cowsay -f kitty "Hello, Docker!"<br>
Эти команды запустят контейнеры с различными рисунками животных с использованием cowsay. Вы можете заменить текст "Hello, Docker!" на любой другой текст, который вы хотите, чтобы животное "сказало". Таким образом, вы сможете не только визуально проверить работу Docker, но и весело провести время!<br>
__<br>
3 - тестируем команды.<br>
__<br>

Создание и запуск контейнеров:<br>

docker run: Запускает контейнер из образа.<br>
docker start: Запускает остановленный контейнер.<br>
docker stop: Останавливает работающий контейнер.<br>
docker restart: Перезапускает контейнер.<br>
docker exec: Выполняет команду внутри запущенного контейнера.<br>
Управление контейнерами:<br>
docker rm $(docker ps -aq): удалит все остановленные контейнеры<br>
__<br>

docker ps: Просмотр списка запущенных контейнеров.<br>
docker ps -a: Просмотр списка всех контейнеров (включая остановленные).<br>
docker rm: Удаляет контейнер.<br>
docker logs: Просмотр логов контейнера.<br>
Работа с образами:<br>
__<br>
docker images: Просмотр списка образов.<br>
docker pull: Загрузка образа с Docker Hub.<br>
docker build: Сборка образа из Dockerfile.<br>
docker rmi: Удаляет образ.<br>

__<br>
4- Хранение данных в контейнерах Docker: <br> Руководство с пояснениями<br>
## Часть-1<br>

В данной методичке мы рассмотрим примеры хранения файлов в контейнерах Docker. Параллельно с теоретическими пояснениями, студенты также будут выполнять практические задания для лучшего понимания материала.<br>
__<br>
### Введение:<br>
Мы уже ознакомились с основами работы с Docker, умеем запускать контейнеры и управлять параметрами.<br> Сейчас давайте разберемся с тем, как можно хранить данные в контейнерах. Это критически важно для инженеров, работающих с Docker, так как хранение данных - ключевой аспект работы.<br>
__<br>
Задачи:<br>
__<br>
Для начала давайте запустим контейнер из образа Ubuntu и войдем в него:<br>
__<br>
docker run -it -h GB --name gb-test ubuntu:22.10<br>
Посмотрим содержимое корневой директории:<br>
__<br>
ls -l /<br>
Создадим новую директорию в корне:<br>
__<br>
mkdir /example<br>
Создадим файл "passwords.txt" и добавим в него какие-либо данные (представим, что это данные сайта или базы данных). Но что делать, если у нас нет редактора? Продолжим.<br>
__<br>
touch /example/passwords.txt<br>
echo "123test" >> /example/passwords.txt<br>
Объяснение:<br>
Мы создали директорию и файл внутри контейнера Ubuntu.<br>
__<br>
Задача:<br>
Давайте попробуем остановить контейнер и затем запустить его снова. Сохранятся ли наши данные?<br>
__<br>
docker stop gb-test<br>
docker start gb-test<br>
docker exec -it gb-test bash<br>
cat /example/passwords.txt<br>
Объяснение:<br>
Наши данные сохранятся, так как мы не пересоздавали контейнер.<br>
__<br>
Задача:<br>
Удалим контейнер и создадим его заново, используя те же команды:<br>
__<br>
docker stop gb-test<br>
docker rm gb-test<br>
docker run -it -h GB --name gb-test ubuntu:22.10<br>
Объяснение:<br>
В этот раз наши данные будут утеряны, так как контейнер был удален.<br>
__<br>
Задача:<br>
Рассмотрим наиболее интересный вариант - использование внешнего хранилища. Создадим директорию и подмонтируем ее к контейнеру:<br>
__<br>
mkdir /test/folder<br>
docker run -it -h GB --name gb-test -v /test/folder:/otherway ubuntu:22.10<br>
Объяснение:<br>
Мы создали директорию и подмонтировали ее в контейнер, что позволило нам сохранить данные.<br>
__<br>
Задача:<br>
Добавим данные в подмонтированную директорию:<br>

echo "$HOSTNAME" >> /otherway/test.txt<br>
Объяснение:<br>
Мы добавили данные в подмонтированную директорию.<br>
__<br>
Задача:<br>
Проверим доступность данных с локальной системы:<br>
__<br>
cat /test/folder/test.txt<br>
Задача:<br>
Удалим контейнер и создадим его снова, подмонтировав директорию:<br>
__<br>
docker rm gb-test<br>
docker run -it -h GB --name gb-test -v /test/folder:/otherway ubuntu:22.10<br>
Объяснение:<br>
Мы видим, что данные по-прежнему доступны.<br>
__<br>
Заключение:<br>
Самый надежный способ хранения данных в контейнерах - использование внешних хранилищ. Важно избегать хранения важных данных внутри контейнеров, чтобы предотвратить потерю информации.<br>


## Часть-2 <br>
Хранение данных в контейнерах Docker: Практическое руководство<br>


В этой части мы рассмотрим практические примеры хранения данных в контейнерах Docker. Мы также рассмотрим случаи использования монтирования папок и файлов__ в контейнерах.<br>

Задачи:<br>
__<br>
Создайте папку, которую мы будем готовы смонтировать в контейнер:<br>
__<br>
mkdir ~/docker-mount-example <br>
В этой папке создайте файл test.txt и наполните его данными:<br>
__<br>
echo "This is the host test.txt file" > ~/docker-mount-example/test.txt<br>
В домашней директории создайте файл test.txt, который также понадобится для монтирования в контейнер, но с другим содержимым:<br>
__<br>
echo "This is the root test.txt file" > ~/test.txt<br>
Создайте контейнер из образа ubuntu:22.10 и задайте ему имя и hostname:<br>
__<br>
docker run -it -h GB --name gb-test ubuntu:22.10<br>
Смонтируйте ранее созданную папку с хоста в контейнер:<br>
__<br>
docker run -it -h GB --name gb-test -v ~/docker-mount-example:/container-mount ubuntu:22.1<br>
Смонтируйте созданный ранее текстовый файл из домашней директории внутрь смонтированной папки в контейнере:<br>
__<br>
docker run -it -h GB --name gb-test -v ~/docker-mount-example:/container-mount -v ~/test.txt:/container-mount/test.txt ubuntu:22.10<br>
Посмотрите содержимое текстового файла в контейнере:<br>
__<br>
cat /container-mount/test.txt<br>
Объяснение:<br>
Мы создали контейнер и монтировали папку docker-mount-example внутрь контейнера. Затем мы монтировали файл test.txt из домашней директории внутрь этой папки в контейнере. При просмотре содержимого файла в контейнере, вы увидите данные из файла в домашней директории.<br>
__<br>
Вопросы для обсуждения:<br>
__<br>
Как это возможно, что содержимое файла в контейнере изменилось, несмотря на разное исходное содержимое на хосте?<br>
Почему файл из домашней директории "перезаписал" файл, который мы создали в папке docker-mount-example?<br>
Итог:<br>
Мы рассмотрели, как монтировать папки и файлы в контейнерах Docker, и почему изменения внутри контейнера могут повлиять на файлы хостовой системы. Это позволяет эффективно управлять данными в контейнерах и избегать потери информации.<br>
